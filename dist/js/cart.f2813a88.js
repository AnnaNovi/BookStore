"use strict";(self["webpackChunkbook_store"]=self["webpackChunkbook_store"]||[]).push([[511,509],{6933:function(t,o,e){e.r(o),e.d(o,{default:function(){return W}});var a=e(3396),r=e(7139);const s={key:1},i=(0,a._)("p",null,"фото",-1),l=(0,a._)("p",{style:{"text-align":"start"}},"название",-1),n=(0,a.Uk)("количество"),c=(0,a._)("p",null,null,-1),_=(0,a._)("span",null,"Итого: ",-1),u=(0,a.Uk)("Перейти к оформлению"),k=(0,a._)("p",null,"Ваша корзина пуста",-1),C=[k];function B(t,o,e,k,B,y){const h=(0,a.up)("TheLoader"),d=(0,a.up)("BookCartBar"),p=(0,a.up)("ButtonBrown");return(0,a.wg)(),(0,a.iD)("section",null,[(0,a._)("h1",{class:(0,r.C_)(t.$style.title)},"Корзина",2),t.loadContent&&!t.emptyCart?((0,a.wg)(),(0,a.j4)(h,{key:0})):(0,a.kq)("",!0),t.loadContent||t.emptyCart?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",s,[(0,a._)("div",{class:(0,r.C_)(t.$style.headRow)},[i,l,(0,a._)("p",null,[n,(0,a._)("span",{class:(0,r.C_)(t.$style.priceWithQuantity)},"/цена",2)]),(0,a._)("p",{class:(0,r.C_)(t.$style.price)},"цена",2),c],2),(0,a._)("hr",{class:(0,r.C_)(t.$style.line)},null,2),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.cartBooksList,((o,e)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:e},[(0,a.Wm)(d,{book:o},null,8,["book"]),(0,a._)("hr",{class:(0,r.C_)(t.$style.line)},null,2)],64)))),128)),(0,a._)("div",{class:(0,r.C_)(t.$style.totalPriceBlock)},[(0,a._)("p",null,[_,(0,a.Uk)((0,r.zw)(this.totalCartPrice),1)]),(0,a.Wm)(p,{paddingLR:70,onClick:o[0]||(o[0]=o=>t.$router.push("/order"))},{default:(0,a.w5)((()=>[u])),_:1})],2)])),t.emptyCart?((0,a.wg)(),(0,a.iD)("div",{key:2,class:(0,r.C_)(t.$style.emptyCart)},C,2)):(0,a.kq)("",!0)])}var y=e(65),h=e(7795);const d=h+"#close",p=["src"],g={key:0},w=(0,a._)("use",{href:d},null,-1),m=[w];function b(t,o,e,s,i,l){return(0,a.wg)(),(0,a.iD)("div",{class:(0,r.C_)(t.$style.bookCartBar)},[(0,a._)("div",{style:{"text-align":"center"},class:(0,r.C_)(t.$style.imageBlock)},[(0,a._)("img",{src:t.imageSrc,alt:"",class:(0,r.C_)(t.$style.image)},null,10,p)],2),(0,a._)("div",{class:(0,r.C_)(t.$style.titleBlock)},[(0,a._)("p",{class:(0,r.C_)(t.$style.author)},(0,r.zw)(this.book?.author),3),(0,a._)("div",{class:(0,r.C_)(t.$style.title),onClick:o[0]||(o[0]=o=>this.$router.push(`/books/${t.bookId}`))},(0,r.zw)(this.book?.title),3)],2),(0,a._)("div",{class:(0,r.C_)(t.$style.quantityBlock)},[(0,a._)("button",{class:(0,r.C_)(t.$style.quantityButton),onClick:o[1]||(o[1]=o=>t.handleQuantityButton(this.book?.key,"decrease"))},"-",2),(0,a._)("span",{class:(0,r.C_)(t.$style.quantity)},(0,r.zw)(this.book?.quantityInCart),3),(0,a._)("button",{class:(0,r.C_)(t.$style.quantityButton),onClick:o[2]||(o[2]=o=>t.handleQuantityButton(this.book?.key,"increase"))},"+",2)],2),(0,a._)("div",{class:(0,r.C_)(t.$style.price)},[(0,a._)("span",{class:(0,r.C_)({[t.$style.lastPrice]:!!t.discountPrice})},(0,r.zw)(t.countPrice.toLocaleString("de-DE")),3),t.discountPrice?((0,a.wg)(),(0,a.iD)("span",g,(0,r.zw)(t.discountPrice.toLocaleString("de-DE")),1)):(0,a.kq)("",!0)],2),(0,a._)("div",{class:(0,r.C_)(t.$style.closeBlock)},[((0,a.wg)(),(0,a.iD)("svg",{class:(0,r.C_)(t.$style.iconClose),onClick:o[3]||(o[3]=o=>t.removeCartBook(this.book.key))},m,2))],2)],2)}var $=(0,a.aZ)({name:"BookCartBar",props:{book:{type:Object},imageSize:{type:String,default:"M"}},computed:{...(0,y.Se)(["cartBooksList","cartList"]),imageSrc(){return`https://covers.openlibrary.org/b/olid/${this.book?.image}-${this.imageSize}.jpg`},discountPrice(){const t=this.book?.discount,o=this.book?.price,e=this.book?.quantityInCart;return t&&o&&e?e*Math.ceil(o*(100-t)/100):null},countPrice(){const t=this.book?.price,o=this.book?.quantityInCart;return t&&o?t*o:null},bookId(){const t=this.book?this.book.key.split("/"):[],o=t[t.length-1];return o}},watch:{cartBooksList(){localStorage.setItem("cartList",JSON.stringify([...this.cartList]))}},methods:{...(0,y.nv)(["removeCartBook","changeCartBookQuantity"]),handleQuantityButton(t,o){this.changeCartBookQuantity({bookKey:t,type:o}),localStorage.setItem("cartList",JSON.stringify([...this.cartList]))}}}),v={price:"BookCartBar_price_rEhAY",lastPrice:"BookCartBar_lastPrice_BUzLY",quantityButton:"BookCartBar_quantityButton_QeOiH",quantity:"BookCartBar_quantity_hARmy",title:"BookCartBar_title_CHI0L",author:"BookCartBar_author_oUFfH",image:"BookCartBar_image_EgCW3",iconClose:"BookCartBar_iconClose_zNVtB",bookCartBar:"BookCartBar_bookCartBar_N22cX",imageBlock:"BookCartBar_imageBlock_os46g",titleBlock:"BookCartBar_titleBlock_yQrbn",quantityBlock:"BookCartBar_quantityBlock_MaWnR",closeBlock:"BookCartBar_closeBlock_xncHC"},f=e(89);const q={};q["$style"]=v;const L=(0,f.Z)($,[["render",b],["__cssModules",q]]);var P=L,S=e(76),z=e(9966),D=(0,a.aZ)({name:"CartView",data(){return{loadContent:!0}},components:{TheLoader:S.Z,BookCartBar:P,ButtonBrown:z.Z},computed:{...(0,y.Se)(["cartBooksList","cartSize","totalCartPrice"]),emptyCart(){return!this.cartSize}},watch:{cartBooksList(){this.loadContent=!1}},methods:{...(0,y.nv)(["getCartBooks"])},mounted(){this.cartSize?this.getCartBooks():this.loadContent=!1}}),V={title:"CartView_title_qGBRA",line:"CartView_line_voFhO",headRow:"CartView_headRow_DZg52",totalPriceBlock:"CartView_totalPriceBlock_O5RVi",emptyCart:"CartView_emptyCart_RWZBc",price:"CartView_price_MfClD",priceWithQuantity:"CartView_priceWithQuantity_thWRO"};const Q={};Q["$style"]=V;const R=(0,f.Z)(D,[["render",B],["__cssModules",Q]]);var W=R},1625:function(t,o,e){e.r(o),e.d(o,{default:function(){return u}});var a=e(3396),r=e(7139);function s(t,o,e,s,i,l){return(0,a.wg)(),(0,a.iD)("div",{class:(0,r.C_)(t.$style.wrapper)},[(0,a._)("h1",{class:(0,r.C_)(t.$style.title)},"Страница находится в разработке...",2)],2)}var i=(0,a.aZ)({name:"PageNotFound"}),l={wrapper:"PageInProgress_wrapper_W2VA6"},n=e(89);const c={};c["$style"]=l;const _=(0,n.Z)(i,[["render",s],["__cssModules",c]]);var u=_}}]);
//# sourceMappingURL=cart.f2813a88.js.map