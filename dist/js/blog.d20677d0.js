"use strict";(self["webpackChunkbook_store"]=self["webpackChunkbook_store"]||[]).push([[239],{6403:function(t,e,s){s.r(e),s.d(e,{default:function(){return C}});var o=s(3396),l=s(7139);const n={key:1,style:{display:"flex","justify-content":"center"}};function i(t,e,s,i,a,d){const g=(0,o.up)("BlogPost"),c=(0,o.up)("TheLoader");return(0,o.wg)(),(0,o.iD)("section",null,[(0,o._)("h1",{class:(0,l.C_)(t.$style.title)},"Блог",2),(0,o._)("div",{class:(0,l.C_)(t.$style.blogsBlock)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.postsList,((e,s)=>((0,o.wg)(),(0,o.j4)(g,{key:e.id,post:e,class:(0,l.C_)({[t.$style.longBlogPost]:t.checkLongPostIndex(s)})},null,8,["post","class"])))),128))],2),t.loadContent?((0,o.wg)(),(0,o.j4)(c,{key:0})):(0,o.kq)("",!0),t.loadContent?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("button",{class:(0,l.C_)(t.$style.nextPage),onClick:e[0]||(e[0]=(...e)=>t.handleNextPageButton&&t.handleNextPageButton(...e))},"Следующая страница",2)]))])}var a=s(65),d=s(76),g=s(9242);const c=["src"];function r(t,e,s,n,i,a){return(0,o.wg)(),(0,o.iD)("div",{class:(0,l.C_)(t.$style.wrapper)},[(0,o._)("img",{src:t.post.image,class:(0,l.C_)(t.$style.image),alt:""},null,10,c),(0,o._)("div",{class:(0,l.C_)(t.$style.textBlock)},[(0,o._)("a",{class:(0,l.C_)(t.$style.title),onClick:e[0]||(e[0]=e=>t.handleTitleBlogButton(this.post.id))},[(0,o._)("span",{ref:"title"},(0,l.zw)(this.post.title),513),(0,o.wy)((0,o._)("span",{class:(0,l.C_)(t.$style.titleDots),ref:"titleDots"},"...",2),[[g.F8,t.addDots]])],2),(0,o._)("p",{class:(0,l.C_)(t.$style.date)},(0,l.zw)(t.getPostDate(this.post.id)),3)],2)],2)}var h=(0,o.aZ)({name:"BlogPost",data(){return{addDots:!1}},props:{post:{type:Object}},methods:{...(0,a.nv)(["getPostById"]),getPostDate(t){const e=new Date(2022,(new Date).getMonth()-t,15),s=e.getFullYear(),o=e.getMonth()+1,l=e.getDate();return`${l<10?"0"+l:l}.${o<10?"0"+o:o}.${s}`},checkAddDots(){const t=this.$refs["title"],e=this.$refs["titleDots"],s=t.getClientRects().length,o=t.getClientRects()[1];if(s>2){this.addDots=!0;const t=o.width+8;e.style.left=`${t}px`}else this.addDots=!1},handleTitleBlogButton(t){this.$router.push(`/blog/${t}`),this.getPostById(t)}},created(){window.addEventListener("resize",this.checkAddDots)},unmounted(){window.removeEventListener("resize",this.checkAddDots)},mounted(){this.checkAddDots()}}),_={wrapper:"BlogPost_wrapper_Jp9DD",image:"BlogPost_image_RVBCu",title:"BlogPost_title_jSmhS",titleDots:"BlogPost_titleDots_yz5Ik",date:"BlogPost_date_EEZD1",textBlock:"BlogPost_textBlock_BKyPK"},u=s(89);const p={};p["$style"]=_;const B=(0,u.Z)(h,[["render",r],["__cssModules",p]]);var P=B,w=(0,o.aZ)({name:"BlogView",data(){return{loadContent:!0}},components:{TheLoader:d.Z,BlogPost:P},computed:{...(0,a.Se)(["postsList"])},watch:{postsList(){this.loadContent=!1}},methods:{...(0,a.nv)(["getPosts","getNextPage"]),handleNextPageButton(){this.loadContent=!0,this.getNextPage(),this.getPosts()},checkLongPostIndex(t){const e=`${t}`,s=+e.charAt(e.length-1);return 5===s||6===s}},mounted(){this.postsList.length?this.loadContent=!1:this.getPosts()}}),k={blogsBlock:"BlogView_blogsBlock_RpDNK",title:"BlogView_title_a7xpy",longBlogPost:"BlogView_longBlogPost_PThGL",nextPage:"BlogView_nextPage_Bb3dN"};const y={};y["$style"]=k;const D=(0,u.Z)(w,[["render",i],["__cssModules",y]]);var C=D}}]);
//# sourceMappingURL=blog.d20677d0.js.map