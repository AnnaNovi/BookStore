"use strict";(self["webpackChunkbook_store"]=self["webpackChunkbook_store"]||[]).push([[239],{6068:function(t,e,s){s.r(e),s.d(e,{default:function(){return $}});var o=s(3396),l=s(7139);function n(t,e,s,n,i,g){const a=(0,o.up)("TheLoader"),c=(0,o.up)("BlogPost");return(0,o.wg)(),(0,o.iD)("section",null,[(0,o._)("h1",{class:(0,l.C_)(t.$style.title)},"Блог",2),t.loadContent?((0,o.wg)(),(0,o.j4)(a,{key:0})):(0,o.kq)("",!0),(0,o._)("div",{class:(0,l.C_)(t.$style.blogsBlock)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.postsList,((e,s)=>((0,o.wg)(),(0,o.j4)(c,{key:e.id,post:e,class:(0,l.C_)({[t.$style.longBlogPost]:5===s||6===s})},null,8,["post","class"])))),128))],2)])}var i=s(65),g=s(7861);const a=["src"];function c(t,e,s,n,i,g){return(0,o.wg)(),(0,o.iD)("div",{class:(0,l.C_)(t.$style.wrapper)},[(0,o._)("img",{src:t.post.image,class:(0,l.C_)(t.$style.image),alt:""},null,10,a),(0,o._)("div",{class:(0,l.C_)(t.$style.textBlock)},[(0,o._)("a",{class:(0,l.C_)(t.$style.title),onClick:e[0]||(e[0]=t=>this.$router.push(`/blog/${this.post.id}`))},[(0,o._)("span",{ref:"title"},(0,l.zw)(t.post.title),513)],2),(0,o._)("p",{class:(0,l.C_)(t.$style.date)},(0,l.zw)(t.getPostDate(this.post.id)),3)],2)],2)}var r=(0,o.aZ)({name:"BlogPost",props:{post:{type:Object}},methods:{getPostDate(t){const e=new Date(2022,(new Date).getMonth()-t,15),s=e.getFullYear(),o=e.getMonth()+1,l=e.getDate();return`${l<10?"0"+l:l}.${o<10?"0"+o:o}.${s}`},changeBlogTitleLength(){const t=this.$refs["title"],e=t.getClientRects().length;if(e>2&&t.textContent){console.log(e+" "+t.textContent);const s=t.textContent.split(" ");s.pop();const o=s.join(" ");t.textContent=o===this.post?.title?o:`${o} ...`,this.changeBlogTitleLength()}}},created(){window.addEventListener("resize",this.changeBlogTitleLength)},unmounted(){window.removeEventListener("resize",this.changeBlogTitleLength)},mounted(){this.changeBlogTitleLength()}}),h={wrapper:"BlogPost_wrapper_Jp9DD",image:"BlogPost_image_RVBCu",title:"BlogPost_title_jSmhS",date:"BlogPost_date_EEZD1",textBlock:"BlogPost_textBlock_BKyPK"},p=s(89);const _={};_["$style"]=h;const d=(0,p.Z)(r,[["render",c],["__cssModules",_]]);var u=d,B=(0,o.aZ)({name:"BlogView",data(){return{loadContent:!0}},components:{TheLoader:g.Z,BlogPost:u},computed:{...(0,i.Se)(["postsList"])},watch:{postsList(){this.loadContent=!1}},methods:{...(0,i.nv)(["getPosts"])},mounted(){this.postsList.length?this.loadContent=!1:this.getPosts()}}),w={blogsBlock:"BlogView_blogsBlock_RpDNK",title:"BlogView_title_a7xpy",longBlogPost:"BlogView_longBlogPost_PThGL"};const C={};C["$style"]=w;const P=(0,p.Z)(B,[["render",n],["__cssModules",C]]);var $=P}}]);
//# sourceMappingURL=blog.e3f37435.js.map